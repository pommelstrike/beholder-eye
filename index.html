<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LSX File Processor</title>
  <script src="https://cdn.jsdelivr.net/npm/jszip/dist/jszip.min.js"></script>
  <script defer src="app.js"></script>
  <style>
    /* General Reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Sans', sans-serif;
      line-height: 1.6;
      background-color: #1E1E2F; /* Industry-standard dark background */
      color: #E8E8F2; /* Lighter text for better contrast */
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      margin-bottom: 10px;
      color: #FFC857; /* Highlight color for headings */
    }

    p {
      margin-bottom: 20px;
      text-align: center;
      max-width: 800px;
      color: #A8A8B3; /* Slightly muted text for better readability */
    }

    #modeToggle {
      margin-bottom: 20px;
      padding: 10px 20px;
      background-color: #3D5A80; /* Button background */
      color: #F0F0F3; /* Button text */
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1em;
      transition: background-color 0.3s, color 0.3s;
    }

    #modeToggle:hover {
      background-color: #2E4457; /* Button hover background */
    }

    #dropZone {
      margin-top: 20px;
      padding: 50px;
      width: 80%;
      max-width: 800px;
      border: 2px dashed #98C1D9; /* Subtle highlight for drag-and-drop box */
      border-radius: 10px;
      text-align: center;
      font-size: 1.2em;
      color: #B8C1C9; /* Slightly muted text for better readability */
      background-color: #25263B; /* Dark but contrasting background */
      cursor: pointer;
      transition: background-color 0.3s, color 0.3s;
    }

    #dropZone:hover {
      background-color: #31364B; /* Hover background for drag-and-drop */
      color: #F8F8F8; /* Text color on hover */
    }

    #downloadButton {
      display: none;
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #3D5A80;
      color: #F0F0F3;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      text-decoration: none;
      font-size: 1em;
      text-align: center;
      transition: background-color 0.3s, color 0.3s;
    }

    #downloadButton:hover {
      background-color: #2E4457;
      color: #FFFFFF;
    }

    footer {
      margin-top: 40px;
      font-size: 0.9em;
      text-align: center;
      color: #A8A8B3;
    }
  </style>
</head>
<body>
  <header>
    <h1><strong>pommelstrike's BeholderEye:</strong> Fix your materialbank .lsf files for console compatibility.</h1>
  </header>
  <main>
    <button id="modeToggle">Switch to Markdown Tree Mode</button>
    <p id="lsxSummary">
      <strong>Materialbank .LSX Processing Mode:</strong> This mode allows you to batch process MaterialBank .lsx files. Drag and drop your .lsx files, and the tool will automatically repoint the shader references to ensure compatibility with Baldur's Gate 3 for PC but more importantly for console.
    </p>
    <p>
      After drag and drop of .lsx files:
      <br>
      - A .zip file will be available to download with updated .lsx files.
      <br>
      - An update report text file explaining the changes made.
    </p>
    <p id="bshdSummary" style="display: none;">
      <strong>Markdown Tree Mode:</strong> This mode scans your project folder and generates a Markdown tree structure of the directory with .bshd shader files locations within your mod project.
    </p>
    <p style="display: none;">
      Note: This tool processes all files locally within your browser. Nothing is ever uploaded.
    </p>
    <p>
      This process ensures your shaders will work seamlessly with pre-packaged BG3 game shaders for console compatibility.
    </p>
    <div id="dropZone">Drag and drop your .lsx files here</div>
    <input type="file" id="fileInput" multiple accept=".lsx" style="display: none;" />
    <a id="downloadButton">Download Processed Files</a>
    <p id="patreonMessage" style="display: none;">
        If you like more tools like this, please consider supporting me to create more BG3 tools and mods <a href="https://www.patreon.com/pommelstrike" target="_blank">https://www.patreon.com/pommelstrike</a>, thank you.
    </p>
  </main>
  <footer>
    <p><a href="https://linktr.ee/pommelstrike" target="_blank">https://linktr.ee/pommelstrike</a></p>
  </footer>
</body>
</html>
